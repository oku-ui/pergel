---
outline: deep
---

# Drizzle

[Drizzle](https://orm.drizzle.team) ORM is a headless TypeScript ORM with a head ğŸ²

It looks and feels simple, performs on day 1000 of your project, lets you do things your way, and is there when you need it.

Itâ€™s the only ORM with both relational and SQL-like query APIs, providing you best of both worlds when it comes to accessing your relational data. Drizzle is lightweight, performant, typesafe, non lactose, gluten-free, sober, flexible and serverless-ready by design. Drizzle is not just a library, itâ€™s an experience ğŸ¤©


## With Drizzle Pergel Module

- ğŸš€ Lightweight and performant
- ğŸ“‹ Typesafe and flexible
- ğŸ“ˆ Autochange schema folder in database
- ğŸ›ï¸ Autoimport and export schema, seeds, storage
- ğŸ”„ Smart seed manamanagement
- ğŸ“Š CLI support 

## Installation

### Step 1: Install
<div class="tip custom-block" style="padding-top: 8px">

Install pergel nuxt module. [here](../../../guide/nuxt-installation.md)

</div>


### Step 2: Configuration

```ts twoslash [nuxt.config.ts]
// https://nuxt.com/docs/api/configuration-nuxt-config#projects
export default defineNuxtConfig({
  modules: [
    'pergel/nuxt',
  ],
  pergel: {
    projects: {
      changeName: { // [!code focus]
        drizzle: true, // [!code focus]
        // ... other modules
      } // [!code focus]
    },
  },
})
```

<!-- automd:changeName -->

::: tip changeName
`changeName` is the name of your project. Please change it to your project name.
:::

<!-- /automd -->

### Step 3: Generate Type and Pergel folders/files

::: code-group

```sh [pnpm]
$ pnpm nuxt prepare
```

```sh [npm]
$ npm nuxt prepare
```

```sh [yarn]
$ yarn nuxt prepare
```

```sh [bun]
$ bun nuxt prepare
```

:::

### Step 4: Install Dependencies/DevDependencies

Auto install dependencies and devDependencies for the project.

::: code-group

```sh [pnpm]
$ pnpm pergel install
```

```sh [npm]
$ npm pergel install
```

```sh [yarn]
$ yarn pergel install
```

```sh [bun]
$ bun pergel install
```

:::


## Lifecycle

### Structure

```
pergel/
â”œâ”€ .env.example
â”œâ”€ merged-package.json
â”œâ”€ changeName.docker-compose.yml
â”œâ”€ README.json

server/
â”œâ”€ [drizzle-changeName]/
â”‚  â”œâ”€ schema/
â”‚  â”‚  â”œâ”€ [names].ts
â”‚  â”‚  â”œâ”€ index.ts
â”‚  â”œâ”€ seeds/
â”‚  â”‚  â”œâ”€ devDrop.ts
â”‚  â”‚  â”œâ”€ devMigration.ts
â”‚  â”‚  â”œâ”€ devSeed.ts
â”‚  â”‚  â”œâ”€ seed1.ts
â”‚  â”œâ”€ storage/
â”‚  â”‚  â”œâ”€ index.ts
â”‚  â”‚  â”œâ”€ [names].ts
|  â”œâ”€ core.ts
â”‚  â”œâ”€ drizzle.config.js
â”‚  â”œâ”€ index.ts

```

#### .env.example

All env settings and how to type will be automatically generated by the Pergel. You need to copy what belongs to drizzle in the envs and move root.

#### changeName.docker-compose.yml

All the tools needed for the project are automatically created in the docker. The database for Drizzle will be added.

```sh
$ docker-compose up
```


### server

#### drizzle-changeName

This is the main folder for the Drizzle. It contains the schema, seeds, storage, and drizzle.config.js.

#### schema

This is the table schema. It is automatically generated from the database schema. `server/drizzle-changeName/index.ts` is automatically added to the server.

```ts twoslash [server/utils/test.ts]

// @noErrors
const table = changeNameTables.
//                             ^|
```

&nbsp;

&nbsp;

&nbsp;

#### seeds

All env and sample code structures required for seed have been added. You can customize the code inside as you like.

::: warning
Do not change the file names here. You can just add seed1 and new seed2 etc and change them. Because this part is CLI dependent.
:::

#### storage

This is the storage folder. It is automatically generated from the database schema. `server/drizzle-changeName/index.ts` is automatically added to the server.

```ts twoslash [server/utils/test.ts]

// @noErrors
const {
  auth,
  // ... 
} = changeNameDrizzleStorage()

auth.
//   ^|
```

&nbsp;

&nbsp;

&nbsp;

#### drizzle.config.js

This is the main configuration file for the Drizzle. The Pergel CLI uses it automatically.

<div class="tip custom-block" style="padding-top: 8px">

Go to the Drizzle Pergel CLI [here](./cli)

</div>

## Wizardry

1. As the code in the `server/drizzle-changeName/schema/**` changes, the database is automatically changed. This does not create migration, it instantly changes the database. 

2. `server/drizzle-changeName/*.ts` All exported files are automatically imported and can be used everywhere without importing. only ts files at root are valid.